{"version":2,"kind":"Notebook","sha256":"5dd3054a172a402de6e0f743d87fc6968843181e314e803f6d7eaf07ae827f3c","slug":"group-saliency-copy1","location":"/notebooks/group_saliency-Copy1.ipynb","dependencies":[],"frontmatter":{"title":"MACHINE GAZINGü§ñüëÅÔ∏è‚Äçüó®Ô∏è‚ú®","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/brainhack-school2025/analyses_friends_annotations","keywords":[],"edit_url":"https://github.com/brainhack-school2025/analyses_friends_annotations/blob/clean-dev/notebooks/group_saliency-Copy1.ipynb","exports":[{"format":"ipynb","filename":"group_saliency-Copy1.ipynb","url":"/build/group_saliency-Copy1-dfd840db567cecb437d143bf2395123f.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport numpy as np\n\n\n","visibility":"hide","key":"atL4cSx1Hz"},{"type":"output","id":"o6-fZP4CV26CibxB3dqxv","data":[],"visibility":"show","key":"uCf84sqmru"}],"visibility":"show","key":"sI97wVuZZU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import pandas as pd\nimport seaborn as sns\n","visibility":"hide","key":"xUWOvqi631"},{"type":"output","id":"x3RYJimKWST8JlYOIdR1A","data":[],"visibility":"show","key":"nJe3STQCjw"}],"visibility":"show","key":"MnQZqGvR7N"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#read data set as pd\ndf= pd.read_csv(\"../output/Peak_scenes_merged.tsv\", sep='\\t')","visibility":"hide","key":"XYN99sXcXh"},{"type":"output","id":"sfVlen_y1MF_aOD8Roopm","data":[],"visibility":"show","key":"C7qzGw3EZh"}],"visibility":"show","key":"AYewLlYM9G"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define the new bin edges and labels\ndf[\"episode_short\"] = df[\"episode\"].str.extract(r'(s\\d+e\\d+)', expand=False).str.upper()\nconditions = [\n    df['p'] == 1,\n    df['p'] == 2,\n    df['p'] == 3,\n    df['p'] > 3\n]\nlabels = ['1', '2', '3', '>3']\n\ndf['p_bin'] = np.select(conditions, labels, default='other') \n\n# Group by episode and binned p values, then count\nframe_counts = df.groupby(['episode_short', 'p_bin'], observed=True).size().unstack(fill_value=0)\n\n# Normalize to get the proportion of each p-bin per episode\nframe_proportions = frame_counts.div(frame_counts.sum(axis=1), axis=0)","visibility":"hide","key":"MHUQZf3hpq"},{"type":"output","id":"1BEzJiaSlozPXtRaK5YbJ","data":[],"visibility":"show","key":"IVdI1Q5lya"}],"visibility":"show","key":"IblrLi6GsP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HEIGHT POSITION DENSITY (pixel space)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vOvb7wxiiL"}],"identifier":"height-position-density-pixel-space","label":"HEIGHT POSITION DENSITY (pixel space)","html_id":"height-position-density-pixel-space","implicit":true,"key":"YrQQnjXFNu"}],"key":"XEo6PvkOZf"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# plot for Density of Height Positions Across Frames\nplt.figure(figsize=(12, 6))\nplt.hexbin(df[\"frame\"], df[\"h\"], gridsize=50, cmap=\"plasma\", mincnt=1)\nplt.gca().invert_yaxis()\nplt.colorbar(label=\"Counts\")\nplt.xlabel(\"Frame\")\nplt.ylabel(\"Height (h)\")\nplt.title(\"Density of Height Positions Across Frames\")\nplt.show()\n","visibility":"hide","key":"nvD5e8jhwg"},{"type":"output","id":"wjE8QMfNPAZ-UNkSxw7EE","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f48c0dd3b8b93f8c03ecdef363b24c83","path":"/build/f48c0dd3b8b93f8c03ecdef363b24c83.png"},"text/plain":{"content":"<Figure size 1200x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"y0GJmvr8bW"}],"visibility":"show","key":"INc8ZW5h7y"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"WIDTH POSITION DENSITY (pixel space)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hnwBlZm2cc"}],"identifier":"width-position-density-pixel-space","label":"WIDTH POSITION DENSITY (pixel space)","html_id":"width-position-density-pixel-space","implicit":true,"key":"yhTWvqP6RM"}],"key":"b1SuOwVliE"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# plot for Density of width Positions Across Frames\nplt.figure(figsize=(12, 6))\nplt.hexbin(df[\"frame\"], df[\"w\"], gridsize=50, cmap=\"plasma\", mincnt=1)\nplt.colorbar(label=\"Counts\")\nplt.xlabel(\"Frame\")\nplt.ylabel(\"Width (w)\")\nplt.title(\"Density of Width Positions Across Frames\")\nplt.show()\n","visibility":"hide","key":"j6zLqUXClD"},{"type":"output","id":"kyd2-plM32AHKu5C-vIDO","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3be995a149397e9485587937ac9166e3","path":"/build/3be995a149397e9485587937ac9166e3.png"},"text/plain":{"content":"<Figure size 1200x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"tEwab6vdhS"}],"visibility":"show","key":"acqDanNhj8"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# get stats on h and w depending on the scene_number\nscene_stats = df.groupby([\"episode_short\", \"global_scene_number\"]).agg({\n    \"h\": [\"mean\", \"std\", \"min\", \"max\"],\n    \"w\": [\"mean\", \"std\", \"min\", \"max\"]\n}).reset_index()\n\n# Optional: flatten multi-level columns\nscene_stats.columns = [\"episode_short\", \"global_scene_number\", \"h_mean\", \"h_std\", \"h_min\", \"h_max\",\n                       \"w_mean\", \"w_std\", \"w_min\", \"w_max\"]\n","visibility":"hide","key":"qdBLZpBtgi"},{"type":"output","id":"sPKyWEcXQGKX4oH1zo4SQ","data":[],"visibility":"show","key":"r9QepcQaG1"}],"visibility":"show","key":"CcusPfjBOI"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HEIGHT AND WIDTH DISTRIBUTION (pixel space)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OzB31k4hWM"}],"identifier":"height-and-width-distribution-pixel-space","label":"HEIGHT AND WIDTH DISTRIBUTION (pixel space)","html_id":"height-and-width-distribution-pixel-space","implicit":true,"key":"DTS5wYOCOC"}],"key":"IS1TZ8A0jU"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#plot to show distribution of how much coordinates in scenes vary \nplt.figure(figsize=(12,5))\n\nplt.subplot(1,2,1)\nsns.histplot(scene_stats[\"h_std\"], bins=30, kde=True)\nplt.title(\"Distribution of Height STD per Scene\")\nplt.xlabel(\"Height STD (pixels)\")\n\nplt.subplot(1,2,2)\nsns.histplot(scene_stats[\"w_std\"], bins=30, kde=True)\nplt.title(\"Distribution of Width STD per Scene\")\nplt.xlabel(\"Width STD (pixels)\")\n\nplt.tight_layout()\nplt.show()\n","visibility":"hide","key":"nUnnQb3njc"},{"type":"output","id":"OyGuTEC-9VZb4O_4Yll-a","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"7a6eb598829868f4dcbfe8d77628c10a","path":"/build/7a6eb598829868f4dcbfe8d77628c10a.png"},"text/plain":{"content":"<Figure size 1200x500 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"wpEf7NLHYv"}],"visibility":"show","key":"zuWf53bWZS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GAZE DENSITY IN PIXEL SPACE","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LjnLvXV9dE"}],"identifier":"gaze-density-in-pixel-space","label":"GAZE DENSITY IN PIXEL SPACE","html_id":"gaze-density-in-pixel-space","implicit":true,"key":"tOkO9JFK3N"}],"key":"RG9XpT2Itc"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"\n\nplt.figure(figsize=(8, 8))\nsns.kdeplot(\n    x=scene_stats[\"w_mean\"], \n    y=scene_stats[\"h_mean\"], \n    fill=True,  # fill the contours\n    cmap=\"viridis\",\n    thresh=0,   # show full density (no threshold)\n    levels=100  # number of contour levels (smoothness/detail)\n)\n\nplt.gca().invert_yaxis()\nplt.gca().invert_xaxis()\nplt.title(\"2D Density of Average Scene Positions (KDE)\")\nplt.xlabel(\"Mean Width (w)\")\nplt.ylabel(\"Mean Height (h)\")\nplt.tight_layout()\nplt.show()\n","visibility":"hide","key":"g3LDJLs4hA"},{"type":"output","id":"oU1zROxun9i9O9TjTUhHY","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8cb1c48ece0f694ad0c6455c760db342","path":"/build/8cb1c48ece0f694ad0c6455c760db342.png"},"text/plain":{"content":"<Figure size 800x800 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"GVhV9eirTq"}],"visibility":"show","key":"DsD5g2AE6u"}],"key":"HGKzRFIqFE"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"üï∞Ô∏è ALL ABOUT DURATIONS AND SEGMENTATION IN THE PYSCENE DATA üï∞Ô∏è","url":"/group-editing","group":"Introduction"}}},"domain":"http://localhost:3001"}